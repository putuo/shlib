const path = require('path');
const fs = require('fs');
const rimraf = require('rimraf');

const targetDir = path.resolve('D:/计算机文档/桌面/1'); // 更改为你的目标目录

function deleteNodeModules(directory) {
  const directories = fs.readdirSync(directory, { withFileTypes: true });

  for (const dirent of directories) {
    if (dirent.isDirectory()) {
      const dirPath = path.join(directory, dirent.name);

      if (dirent.name === 'node_modules') {
        console.log(`Deleting ${dirPath}`);
        rimraf.sync(dirPath);
      } else {
        deleteNodeModules(dirPath);  // 递归处理子目录
      }
    }
  }
}

deleteNodeModules(targetDir);
console.log('Done deleting node_modules folders.');
